### 브라우저가 렌더링을 끝내기 까지



##### 브라우저와 브라우저 렌더링을 알아야 하는 이유

브라우저는 HTML, 이미지 등을 화면에 표현해준다. 인터넷 익스플로러, 파이어폭스, 오페라, 사파리, 크롬 등이 있다. 

HTML 문서가 실제로 실행되는 브라우저의 동작 원리를 알아야 HTML DOM 객체가 어떤 원리에 의해서 자바스크립트 코드에 의해 제어되는지 알 수 있다.



##### 브라우저 기본 구조

1. 사용자 인터페이스(User Interface) - 공통적으로 포함하는 주소 표시줄, 이전/다음 버튼, 북마크 메뉴 등. 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부분이다. 


2. 브라우저 엔진 - 렌더링 엔진에 작업을 요청하는 부분. 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어한다.


3. 렌더링 엔진 - 요청한 콘텐츠를 표시하는 부분. 예를 들어 HTML을 요청하면 HTML과 CSS를 파싱하여 화면에 표시하는 역할을 함. 
4. 네트워킹 - HTTP 요청과 같은 네트워크 호출에 필요. 이것은 플랫폼 독립적인 인터페이스이고 각 플랫폼 하부에서 실행됨. 
5. UI 백엔드 - 콤보 박스와 창 같은 기본적인 장치를 그림. 플랫폼에서 명시하지 않은 일반적인 인터페이스로서, OS 사용자 인터페이스 체계를 사용. 


6. 자바스크립트 해석기 - 자바스크립트 코드를 해석하고 실행. 


7. 자료 저장소(Data storage) - 이 부분은 자료를 저장하는 계층이다. 쿠키를 저장하는 것과 같이 모든 종류의 자원을 하드 디스크/로컬영역에 저장할 필요가 있다. HTML5 명세에는 브라우저가 지원하는 '[웹](http://www.html5rocks.com/en/features/storage)[ ](http://www.html5rocks.com/en/features/storage)[데이터](http://www.html5rocks.com/en/features/storage)[ ](http://www.html5rocks.com/en/features/storage)[베이스](http://www.html5rocks.com/en/features/storage)'가 정의되어 있다.



##### 렌더링 엔진의 동작과정 = 브라우저 렌더링

1. HTML 파싱을 통한 **DOM 트리 생성**

2. CSS파일 등 스타일 요소 파싱을 통한 **스타일 구조체 생성**

3. DOM 트리와 스타일 구조체를 바탕으로 **렌더 트리 생성**

4. 정확한 위치에 표시하기 위한 배치 **레이아웃 처리**

5. 화면에 표시하는 **페인트(Paint)**

   ​

+

 - DOM 트리 생성
    - HTML 문서를 DOM트리로 만들기 위해 각 요소를 파싱한다. DOM요소노드가 트리형태로 만들어져서 DOM트리라고 한다.
 - 스타일 구조체 생성
    - 스타일 정보는 3단계로 나누어 처리된다. 브라우저 자체에 포함된 기본 스타일 정보(User Agent), 사용자 정의 스타일(외부파일,내부정의스타일), HTML태그에 style속성을 사용해 기술되는 인라인 스타일 정보
 - 렌더 트리 생성
    - 화면에 보여지는 노드만으로 구성되기 때문에 DOM트리와 렌더 트리의 노드는 1:1 대응되지 않음. 각 노드가 frame이나 box로 불린다.
 - 레이아웃 처리
    - 정확한 위치에 배치되도록 위치를 계산.
 - 페인트(Paint)
    - 어디에 배치될지 계산했으므로 렌더트리를 순회하면서 페인트 함수로 화면에 표현.



##### 참고페이지

[브라우저는 어떻게 동작하는가?](http://d2.naver.com/helloworld/59361 "")

[자바스크립트 브라우저 렌더링](http://12bme.tistory.com/140 "")







